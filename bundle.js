(()=>{"use strict";var e={216:(e,t,n)=>{function a(e){let t,n,a;"online"===e.type?(t="fa-solid fa-laptop",n="Take challenge online",a="(online)"):(t="fa-sharp fa-solid fa-house",n="Book this room",a="(on-site)");const c=document.createElement("li");c.classList.add("challenge-item");const o=document.createElement("i");o.setAttribute("class",t+" challenge-image-icon"),c.appendChild(o);const l=document.createElement("img");l.classList.add("challenge-image"),l.src=e.image,l.alt="challenge image",c.appendChild(l);const i=document.createElement("h3");i.classList.add("challenge-title"),i.textContent=`${e.title} ${a}`,c.appendChild(i);const s=document.createElement("ul");s.classList.add("rating"),s.setAttribute("role","meter"),s.setAttribute("aria-label","rating"),s.setAttribute("arial-valuemin","0"),s.setAttribute("aria-valuemax","5"),s.setAttribute("aria-valuenow",e.rating),s.setAttribute("aria-valuetext",e.rating+" out of 5"),c.appendChild(s);const r=Math.floor(e.rating);for(let e=0;e<5;e++){let t=document.createElement("li");t.classList.add("rating-star"),e<r&&t.classList.add("active"),s.appendChild(t)}const d=document.createElement("small");d.classList.add("challenge-meta"),d.textContent=`${e.minParticipants}-${e.maxParticipants} participants`,c.appendChild(d);const u=document.createElement("p");u.classList.add("challenge-description"),u.textContent=e.description,c.appendChild(u);const m=document.createElement("input");m.setAttribute("hidden","true"),m.setAttribute("value",JSON.stringify(e));const p=document.createElement("button");return p.classList.add("button","primary"),p.textContent=n,p.append(m),c.appendChild(p),c}n.d(t,{Z:()=>a})},631:(e,t,n)=>{async function a(){const e=await fetch("https://lernia-sjj-assignments.vercel.app/api/challenges");return(await e.json()).challenges}n.d(t,{Z:()=>a})},30:(e,t,n)=>{function a(){document.querySelector(".modal-container").remove()}async function c(e){const t=document.querySelector(".modal-container");t.innerHTML="",t.appendChild(await e)}function o(){console.log("hej"),document.querySelectorAll(".challenge-item button").forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=document.createElement("div");t.classList.add("modal-container"),document.body.appendChild(t),c(async function(e){const t=document.createElement("form");t.classList.add("modal-content");const n=document.createElement("h1");n.textContent=`Book room ${e.title} (step 1)`,t.appendChild(n);const o=document.createElement("p");o.textContent="What date would you like to come?",t.appendChild(o);const l=document.createElement("label");l.textContent="Date",l.for="input[type=date]",t.appendChild(l);const i=document.createElement("input");i.type="date",i.setAttribute("min",(new Date).toLocaleDateString()),t.appendChild(i);const s=document.createElement("button");return s.type="submit",s.classList.add("button","primary"),s.name="search-times",s.textContent="Search available times",t.appendChild(s),t.addEventListener("submit",(async t=>{t.preventDefault();const n=i.value;if(""===i.value)alert("Please choose a date");else{const t=await async function(e,t){const n=await fetch("https://lernia-sjj-assignments.vercel.app/api/booking/available-times?date="+t+"&challenge="+e);return await n.json()}(e.id,n);c(async function(e,t){const n=document.createElement("form");n.classList.add("modal-content");const o=document.createElement("h1");o.textContent=`Book room ${e.title} (step 2)`,n.appendChild(o);const l=document.createElement("label");l.textContent="Name",l.for="input-name",n.appendChild(l);const i=document.createElement("input");i.type="text",i.classList.add("input-name"),n.appendChild(i);const s=document.createElement("label");s.textContent="E-mail",s.for="input-email",n.appendChild(s);const r=document.createElement("input");r.type="email",r.classList.add("input-email"),n.appendChild(r);const d=document.createElement("label");d.textContent="What time?",s.for="select-time",n.appendChild(d);const u=document.createElement("select");u.classList.add("select-time");const m=document.createElement("option");m.textContent="-- Choose time --",u.appendChild(m),n.appendChild(u);for(let e=0;e<t.slots.length;e++){const n=document.createElement("option");n.textContent=t.slots[e],u.appendChild(n)}const p=document.createElement("label");p.textContent="How many participants?",p.for="select-participants",n.appendChild(p);const h=document.createElement("select");h.classList.add("select-participants");const f=document.createElement("option");f.textContent="-- Select number --",h.appendChild(f),n.appendChild(h);let y=e.maxParticipants-e.minParticipants;for(let t=0;t<=y;t++){const n=document.createElement("option");n.textContent=`${e.minParticipants+t} participants`,h.appendChild(n)}const v=document.createElement("button");return v.type="submit",v.classList.add("button","primary"),v.name="submit-booking",v.textContent="Submit booking",n.appendChild(v),n.addEventListener("submit",(async n=>{n.preventDefault();let o=document.querySelector(".input-name").value,l=document.querySelector(".input-email").value,i=document.querySelector(".select-participants").value,s=document.querySelector(".select-time").value,r=t.date,d=e.id,u=i.match(/(\d+)/);""===o||""===l?alert("Please fill in requested fields."):"-- Select number --"===i?alert("Please select participants."):"-- Choose time --"===s?alert("Please choose time."):(i=parseInt(u[0]),await async function(e,t,n,a,c,o){const l=await fetch("https://lernia-sjj-assignments.vercel.app/api/booking/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge:e,name:t,email:n,date:a,time:c,participants:o})}),i=await l.json();console.log(i)}(d,o,l,r,s,i),c(function(){const e=document.createElement("div");e.classList.add("modal-content","center");const t=document.createElement("h1");t.textContent="Thank you!",e.appendChild(t);const n=document.createElement("button");return n.classList.add("button","secondary"),n.textContent="Back to challenges",n.addEventListener("click",a),e.appendChild(n),e}()))})),n}(e,t))}})),t}(e))}(JSON.parse(e.querySelector("input").value))}))}))}n.d(t,{aC:()=>o})},555:(e,t,n)=>{n.d(t,{Y:()=>o,r:()=>c});var a=n(30);async function c(e,t=function(e){return e},n,a){let c=await e;c=await t(c),c.forEach((e=>{const t=n(e);a.append(t)}))}async function o(e,t,n,...c){let o=await e;n.innerHTML="",n.nextElementSibling.classList.add("hidden"),c.forEach((e=>{o=e(o)})),0===o.length?n.nextElementSibling.classList.remove("hidden"):o.forEach((e=>{const a=t(e);n.append(a)})),(0,a.aC)()}}},t={};function n(a){var c=t[a];if(void 0!==c)return c.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(631),n(216),n(555),n(30),document.querySelector(".main-nav-toggle").addEventListener("click",(()=>{document.querySelector(".main-nav").classList.toggle("open")})),(()=>{var e=n(631);function t(e,t){return e.filter((e=>e.type===t))}var a=n(555),c=n(216);function o(e){const t=[];return document.querySelectorAll(".filter-by-type input[type=checkbox]:checked").forEach((e=>{t.push(e.value)})),e.filter((e=>t.some((t=>e.type.includes(t)))))}async function l(e,t){let n=await t;return n=n.filter((t=>e.every((e=>t.labels.includes(e))))),n}function i(e){let t=document.getElementById("text-filter").value;if(console.log(t),t)return e.filter((e=>e.title.toUpperCase().includes(t.toUpperCase())||e.description.toUpperCase().includes(t.toUpperCase())))}function s(e){const t=document.querySelectorAll(".starFrom.active"),n=document.querySelectorAll(".starTo.active");return e.filter((e=>e.rating>=t.length&&e.rating<=n.length))}var r=n(30);const d=document.querySelector(".challenge-list"),u=document.querySelector("#text-filter"),m=document.querySelector("input[name='online-challenge']"),p=document.querySelector("input[name='on-site-challenge']"),h=[m,p],f=document.querySelector("#btn-container"),y=document.querySelectorAll(".starDeactive");!async function(){const n=await(0,e.Z)(),v=function(){const e=window.location.search;return new URLSearchParams(e).get("type")}();await async function(e,t,n,a,c){const o=e;let l=n;"online"===o?(l=a(l,"online"),console.log(l)):"onsite"===o&&(l=a(l,"onsite")),l.forEach((e=>{const n=c(e);t.append(n)}))}(v,d,n,t,c.Z),(0,r.aC)(),"online"===v?m.setAttribute("checked","true"):("onsite"===v||m.setAttribute("checked","true"),p.setAttribute("checked","true")),function(){const e=document.querySelectorAll(".starsFrom li"),t=document.querySelectorAll(".starsTo li");let n=null,a=null;e.forEach(((t,a)=>{t.addEventListener("click",(t=>{n===a?(t.target.classList.remove("active"),n=a-1):(t.target.classList.add("active"),n=a),e.forEach(((e,t)=>{t<a?e.classList.add("active"):t>a&&e.classList.remove("active")}))}))})),t.forEach(((e,n)=>{e.addEventListener("click",(e=>{a===n?(e.target.classList.remove("active"),a=n-1):(e.target.classList.add("active"),a=n),t.forEach(((e,t)=>{t<n?e.classList.add("active"):t>n&&e.classList.remove("active")}))}))}))}(),y.forEach((e=>{e.addEventListener("click",(async()=>{let e=document.querySelectorAll(".starsFrom .active");e=Array.from(e),e=e.map((e=>e.textContent)),console.log(e);let t=n;t=await l(e,t),await(0,a.Y)(t,c.Z,d,i,o,s)}))}));const E=async function(e){let t=await e,n=[];return t.forEach((e=>{n.push(e.labels)})),n=n.flat(),n=new Set(n),n=Array.from(n),n}(n),g=async function(e,t,n){let a=await e;const c=[];return a.forEach((e=>{const t=document.createElement("button");t.classList.add("btn"),t.textContent=e,n.append(t),c.push(t)})),c}(E,0,f);(await g).forEach((e=>{e.addEventListener("click",(async e=>{e.target.classList.toggle("active");let t=f.querySelectorAll(".active");t=Array.from(t),t=t.map((e=>e.textContent)),console.log(n);let r=n;r=l(t,r),(0,a.Y)(r,c.Z,d,i,o,s)}))})),u.addEventListener("keyup",(async()=>{let e=f.querySelectorAll(".active");e=Array.from(e),e=e.map((e=>e.textContent));let t=n;t=await l(e,t),await(0,a.Y)(t,c.Z,d,i,o,s)})),h.forEach((e=>{e.addEventListener("click",(async()=>{let e=f.querySelectorAll(".active");e=Array.from(e),e=e.map((e=>e.textContent));let t=n;t=await l(e,t),await(0,a.Y)(t,c.Z,d,i,o,s)}))}))}(),document.querySelector("#show-filters").addEventListener("click",(()=>{document.querySelector(".filter-container").classList.add("show"),document.querySelector("#show-filters").classList.add("show")})),document.querySelector("#hide-filters").addEventListener("click",(()=>{document.querySelector(".filter-container").classList.remove("show"),document.querySelector("#show-filters").classList.remove("show")}))})()})();