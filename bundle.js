(()=>{"use strict";function e(){document.querySelector(".modal-container").remove()}async function t(e){const t=document.querySelector(".modal-container");t.innerHTML="",t.appendChild(await e)}(async()=>{let n=await async function(){const e=await fetch("https://lernia-sjj-assignments.vercel.app/api/challenges");return(await e.json()).challenges}();renderAll(n),document.getElementById("text-filter").addEventListener("keyup",(()=>function(e){let t=document.getElementById("text-filter").value;if(console.log(t),t)return e.filter((e=>e.title.toUpperCase().includes(t.toUpperCase())||e.description.toUpperCase().includes(t.toUpperCase())))}(n))),document.querySelectorAll(".challenge-item button").forEach((a=>{a.addEventListener("click",(o=>{console.log(a),console.log(),console.log(n),function(n){const a=document.createElement("div");a.classList.add("modal-container"),document.body.appendChild(a),t(async function(n){const a=document.createElement("form");a.classList.add("content");const o=document.createElement("h1");o.textContent=`Book room ${n.title} (step 1)`,a.appendChild(o);const c=document.createElement("p");c.textContent="What date would you like to come?",a.appendChild(c);const l=document.createElement("label");l.textContent="Date",l.for="input[type=date]",a.appendChild(l);const s=document.createElement("input");s.type="date",a.appendChild(s);const i=document.createElement("button");return i.type="submit",i.classList.add("button","primary"),i.name="search-times",i.textContent="Search available times",a.appendChild(i),a.addEventListener("submit",(async a=>{a.preventDefault(),console.log(s.value);const o=s.value;let c=new Date;const l=c.getUTCFullYear(),i=c.getUTCMonth()+1,d=c.getUTCDate();if(c=l+"-"+i+"-"+d,console.log(c),/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(s.value))alert("Chosen date is not putten correctly");else if(null==s.value)alert("Chosen date is not valid");else if(""==s.value)alert("Please select a date");else if(s<=newDate)alert("Date can't be in the past");else{const a=await async function(e,t){const n=await fetch("https://lernia-sjj-assignments.vercel.app/api/booking/available-times?date="+t+"&challenge="+e),a=await n.json();return a.slots.forEach((e=>{console.log(e)})),a.slots}(n.id,o);t(async function(n,a){const o=document.createElement("form");o.classList.add("content");const c=document.createElement("h1");c.textContent=`Book room ${n.title} (step 2)`,o.appendChild(c);const l=document.createElement("label");l.textContent="Name",l.for="input-name",o.appendChild(l);const s=document.createElement("input");s.type="text",s.classList.add("input-name"),o.appendChild(s);const i=document.createElement("label");i.textContent="E-mail",i.for="input-email",o.appendChild(i);const d=document.createElement("input");d.type="text",d.classList.add("input-email"),o.appendChild(d);const r=document.createElement("label");r.textContent="What time?",i.for="select-time",o.appendChild(r);const p=document.createElement("select");p.classList.add("select-time"),o.appendChild(p);for(let e=0;e<a.slots.length;e++){const t=document.createElement("option");t.textContent=a.slots[e],p.appendChild(t)}const m=document.createElement("label");m.textContent="How many participants?",m.for="select-participants",o.appendChild(m);const u=document.createElement("select");u.classList.add("select-participants"),o.appendChild(u);let h=n.maxParticipants-n.minParticipants;for(let e=0;e<h;e++){const t=document.createElement("option");t.textContent=`${n.minParticipants+e} participants`,u.appendChild(t)}const C=document.createElement("button");return C.type="submit",C.classList.add("button","primary"),C.name="submit-booking",C.textContent="Submit booking",o.appendChild(C),o.addEventListener("submit",(async n=>{n.preventDefault(),t(function(){const t=document.createElement("div");t.classList.add("content","center");const n=document.createElement("h1");n.textContent="Thank you!",t.appendChild(n);const a=document.createElement("button");return a.classList.add("button","secondary"),a.textContent="Back to challenges",a.addEventListener("click",e),t.appendChild(a),t}())})),o}(n,a))}})),a}(n))}(n)}))}))})()})();